<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 10.0.3"/>
    <title>simmate.website.core_components.filters.relaxation API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;}nav.pdoc{--pad:1.75rem;--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent }nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc li{display:block;margin:0;padding:.2rem 0 .2rem var(--indent);transition:all 100ms;}nav.pdoc > div > ul > li{padding-left:0;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--code);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc section{margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.pdoc details{filter:opacity(1);}.pdoc details:not([open]){height:0;}.pdoc details > summary{position:absolute;top:-35px;right:0;font-size:.75rem;color:var(--muted);padding:0 .7em;user-select:none;cursor:pointer;}.pdoc details > summary:focus{outline:0;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc > section:first-of-type > .docstring{margin-bottom:2.5rem;}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc .headerlink{position:absolute;width:0;margin-left:-1.5rem;line-height:1.4rem;font-size:1.5rem;font-weight:normal;transition:all 100ms ease-in-out;opacity:0;user-select:none;}.pdoc .attr > .headerlink{margin-left:-2.5rem;}.pdoc *:hover > .headerlink,.pdoc *:target > .attr > .headerlink{opacity:1;}.pdoc .attr{display:block;color:var(--text);margin:.5rem 0 .5rem;padding:.4rem 5rem .4rem 1rem;background-color:var(--accent);}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{white-space:pre-wrap;}.pdoc .annotation{color:var(--annotation);}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../filters.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;simmate.website.core_components.filters</a>

<a href="https://github.com/jacksund/simmate">            <img src="https://github.com/jacksund/simmate/blob/main/src/simmate/website/static_files/images/simmate-logo.svg?raw=true" class="logo" alt="project logo"/>
</a>
            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



        <h2>API Documentation</h2>
            <ul class="memberlist">
            <li>
                    <a class="class" href="#Relaxation">Relaxation</a>
                            <ul class="memberlist">
                        <li>
                                <a class="class" href="#Relaxation.Meta">Relaxation.Meta</a>
                                        <ul class="memberlist">
                                    <li>
                                            <a class="function" href="#Relaxation.Meta.__init__">Meta</a>
                                    </li>
                                    <li>
                                            <a class="class" href="#Relaxation.Meta.model">Relaxation.Meta.model</a>
                                    </li>
                                    <li>
                                            <a class="variable" href="#Relaxation.Meta.fields">fields</a>
                                    </li>
                            </ul>

                        </li>
                        <li>
                                <a class="variable" href="#Relaxation.declared_filters">declared_filters</a>
                        </li>
                        <li>
                                <a class="variable" href="#Relaxation.base_filters">base_filters</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#IonicStep">IonicStep</a>
                            <ul class="memberlist">
                        <li>
                                <a class="class" href="#IonicStep.Meta">IonicStep.Meta</a>
                                        <ul class="memberlist">
                                    <li>
                                            <a class="function" href="#IonicStep.Meta.__init__">Meta</a>
                                    </li>
                                    <li>
                                            <a class="class" href="#IonicStep.Meta.model">IonicStep.Meta.model</a>
                                    </li>
                                    <li>
                                            <a class="variable" href="#IonicStep.Meta.fields">fields</a>
                                    </li>
                            </ul>

                        </li>
                        <li>
                                <a class="variable" href="#IonicStep.declared_filters">declared_filters</a>
                        </li>
                        <li>
                                <a class="variable" href="#IonicStep.base_filters">base_filters</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section>
                        <a class="pdoc-button git-button" href="https://github.com/jacksund/simmate/tree/main/src/simmate/website/core_components/filters/relaxation.py">Edit on GitHub</a>
                    <h1 class="modulename">
<a href="./../../../../simmate.html">simmate</a><wbr>.<a href="./../../../website.html">website</a><wbr>.<a href="./../../core_components.html">core_components</a><wbr>.<a href="./../filters.html">filters</a><wbr>.relaxation    </h1>

                
                        <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span><span class="c1"># -*- coding: utf-8 -*-</span>

<span class="kn">from</span> <span class="nn">simmate.website.core_components.filters</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">Structure</span><span class="p">,</span>
    <span class="n">Forces</span><span class="p">,</span>
    <span class="n">Thermodynamics</span><span class="p">,</span>
    <span class="n">Calculation</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">simmate.database.base_data_types.relaxation</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">Relaxation</span> <span class="k">as</span> <span class="n">RelaxationTable</span><span class="p">,</span>
    <span class="n">IonicStep</span> <span class="k">as</span> <span class="n">IonicStepTable</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">class</span> <span class="nc">Relaxation</span><span class="p">(</span><span class="n">Structure</span><span class="p">,</span> <span class="n">Calculation</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">RelaxationTable</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="n">volume_change</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;range&quot;</span><span class="p">],</span>
            <span class="n">band_gap</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;exact&quot;</span><span class="p">,</span> <span class="s2">&quot;range&quot;</span><span class="p">],</span>
            <span class="n">is_gap_direct</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;exact&quot;</span><span class="p">],</span>
            <span class="n">energy_fermi</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;range&quot;</span><span class="p">],</span>
            <span class="n">conduction_band_minimum</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;range&quot;</span><span class="p">],</span>
            <span class="n">valence_band_maximum</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;range&quot;</span><span class="p">],</span>
            <span class="o">**</span><span class="n">Structure</span><span class="o">.</span><span class="n">get_fields</span><span class="p">(),</span>
            <span class="o">**</span><span class="n">Calculation</span><span class="o">.</span><span class="n">get_fields</span><span class="p">(),</span>
        <span class="p">)</span>


<span class="k">class</span> <span class="nc">IonicStep</span><span class="p">(</span><span class="n">Structure</span><span class="p">,</span> <span class="n">Forces</span><span class="p">,</span> <span class="n">Thermodynamics</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">IonicStepTable</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="o">**</span><span class="n">Structure</span><span class="o">.</span><span class="n">get_fields</span><span class="p">(),</span>
            <span class="o">**</span><span class="n">Thermodynamics</span><span class="o">.</span><span class="n">get_fields</span><span class="p">(),</span>
            <span class="o">**</span><span class="n">Forces</span><span class="o">.</span><span class="n">get_fields</span><span class="p">(),</span>
        <span class="p">)</span>
</pre></div>

        </details>

            </section>
                <section id="Relaxation">
                                <div class="attr class">
        <a class="headerlink" href="#Relaxation">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">Relaxation</span><wbr>(<span class="base"><a href="structure.html#Structure">simmate.website.core_components.filters.structure.Structure</a></span>, <span class="base"><a href="calculation.html#Calculation">simmate.website.core_components.filters.calculation.Calculation</a></span>):
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Relaxation</span><span class="p">(</span><span class="n">Structure</span><span class="p">,</span> <span class="n">Calculation</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">RelaxationTable</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="n">volume_change</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;range&quot;</span><span class="p">],</span>
            <span class="n">band_gap</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;exact&quot;</span><span class="p">,</span> <span class="s2">&quot;range&quot;</span><span class="p">],</span>
            <span class="n">is_gap_direct</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;exact&quot;</span><span class="p">],</span>
            <span class="n">energy_fermi</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;range&quot;</span><span class="p">],</span>
            <span class="n">conduction_band_minimum</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;range&quot;</span><span class="p">],</span>
            <span class="n">valence_band_maximum</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;range&quot;</span><span class="p">],</span>
            <span class="o">**</span><span class="n">Structure</span><span class="o">.</span><span class="n">get_fields</span><span class="p">(),</span>
            <span class="o">**</span><span class="n">Calculation</span><span class="o">.</span><span class="n">get_fields</span><span class="p">(),</span>
        <span class="p">)</span>
</pre></div>

        </details>

    

                            <div id="Relaxation.declared_filters" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#Relaxation.declared_filters">#&nbsp;&nbsp</a>

        <span class="name">declared_filters</span><span class="default_value"> = OrderedDict([(&#39;include_subsystems&#39;, &lt;django_filters.rest_framework.filters.BooleanFilter object&gt;), (&#39;chemical_system&#39;, &lt;django_filters.filters.CharFilter object&gt;)])</span>
    </div>

    
    

                            </div>
                            <div id="Relaxation.base_filters" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#Relaxation.base_filters">#&nbsp;&nbsp</a>

        <span class="name">base_filters</span><span class="default_value"> = OrderedDict([(&#39;volume_change__range&#39;, &lt;django_filters.filterset.BaseFilterSet.filter_for_lookup.&lt;locals&gt;.ConcreteRangeFilter object&gt;), (&#39;band_gap&#39;, &lt;django_filters.filters.NumberFilter object&gt;), (&#39;band_gap__range&#39;, &lt;django_filters.filterset.BaseFilterSet.filter_for_lookup.&lt;locals&gt;.ConcreteRangeFilter object&gt;), (&#39;is_gap_direct&#39;, &lt;django_filters.rest_framework.filters.BooleanFilter object&gt;), (&#39;energy_fermi__range&#39;, &lt;django_filters.filterset.BaseFilterSet.filter_for_lookup.&lt;locals&gt;.ConcreteRangeFilter object&gt;), (&#39;conduction_band_minimum__range&#39;, &lt;django_filters.filterset.BaseFilterSet.filter_for_lookup.&lt;locals&gt;.ConcreteRangeFilter object&gt;), (&#39;valence_band_maximum__range&#39;, &lt;django_filters.filterset.BaseFilterSet.filter_for_lookup.&lt;locals&gt;.ConcreteRangeFilter object&gt;), (&#39;nsites__range&#39;, &lt;django_filters.filterset.BaseFilterSet.filter_for_lookup.&lt;locals&gt;.ConcreteRangeFilter object&gt;), (&#39;nelements__range&#39;, &lt;django_filters.filterset.BaseFilterSet.filter_for_lookup.&lt;locals&gt;.ConcreteRangeFilter object&gt;), (&#39;density__range&#39;, &lt;django_filters.filterset.BaseFilterSet.filter_for_lookup.&lt;locals&gt;.ConcreteRangeFilter object&gt;), (&#39;density_atomic__range&#39;, &lt;django_filters.filterset.BaseFilterSet.filter_for_lookup.&lt;locals&gt;.ConcreteRangeFilter object&gt;), (&#39;volume__range&#39;, &lt;django_filters.filterset.BaseFilterSet.filter_for_lookup.&lt;locals&gt;.ConcreteRangeFilter object&gt;), (&#39;volume_molar__range&#39;, &lt;django_filters.filterset.BaseFilterSet.filter_for_lookup.&lt;locals&gt;.ConcreteRangeFilter object&gt;), (&#39;formula_full&#39;, &lt;django_filters.filters.CharFilter object&gt;), (&#39;formula_reduced&#39;, &lt;django_filters.filters.CharFilter object&gt;), (&#39;formula_anonymous&#39;, &lt;django_filters.filters.CharFilter object&gt;), (&#39;spacegroup__number&#39;, &lt;django_filters.filters.NumberFilter object&gt;), (&#39;spacegroup__symbol&#39;, &lt;django_filters.filters.CharFilter object&gt;), (&#39;spacegroup__crystal_system&#39;, &lt;django_filters.filters.CharFilter object&gt;), (&#39;spacegroup__point_group&#39;, &lt;django_filters.filters.CharFilter object&gt;), (&#39;directory&#39;, &lt;django_filters.filters.CharFilter object&gt;), (&#39;prefect_flow_run_id&#39;, &lt;django_filters.filters.CharFilter object&gt;), (&#39;created_at__range&#39;, &lt;django_filters.filterset.BaseFilterSet.filter_for_lookup.&lt;locals&gt;.ConcreteRangeFilter object&gt;), (&#39;updated_at__range&#39;, &lt;django_filters.filterset.BaseFilterSet.filter_for_lookup.&lt;locals&gt;.ConcreteRangeFilter object&gt;), (&#39;include_subsystems&#39;, &lt;django_filters.rest_framework.filters.BooleanFilter object&gt;), (&#39;chemical_system&#39;, &lt;django_filters.filters.CharFilter object&gt;)])</span>
    </div>

    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>django_filters.filterset.BaseFilterSet</dt>
                                <dd id="Relaxation.__init__" class="function">BaseFilterSet</dd>
                <dd id="Relaxation.is_valid" class="function">is_valid</dd>
                <dd id="Relaxation.errors" class="variable">errors</dd>
                <dd id="Relaxation.filter_queryset" class="function">filter_queryset</dd>
                <dd id="Relaxation.qs" class="variable">qs</dd>
                <dd id="Relaxation.get_form_class" class="function">get_form_class</dd>
                <dd id="Relaxation.get_fields" class="function">get_fields</dd>
                <dd id="Relaxation.get_filter_name" class="function">get_filter_name</dd>
                <dd id="Relaxation.get_filters" class="function">get_filters</dd>
                <dd id="Relaxation.filter_for_field" class="function">filter_for_field</dd>
                <dd id="Relaxation.filter_for_lookup" class="function">filter_for_lookup</dd>

            </div>
            <div><dt><a href="structure.html#Structure">simmate.website.core_components.filters.structure.Structure</a></dt>
                                <dd id="Relaxation.include_subsystems" class="variable"><a href="structure.html#Structure.include_subsystems">include_subsystems</a></dd>
                <dd id="Relaxation.chemical_system" class="variable"><a href="structure.html#Structure.chemical_system">chemical_system</a></dd>
                <dd id="Relaxation.skip_filter" class="function"><a href="structure.html#Structure.skip_filter">skip_filter</a></dd>
                <dd id="Relaxation.filter_chemical_system" class="function"><a href="structure.html#Structure.filter_chemical_system">filter_chemical_system</a></dd>

            </div>
            <div><dt>django_filters.rest_framework.filterset.FilterSet</dt>
                                <dd id="Relaxation.FILTER_DEFAULTS" class="variable">FILTER_DEFAULTS</dd>
                <dd id="Relaxation.form" class="variable">form</dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="Relaxation.Meta">
                                <div class="attr class">
        <a class="headerlink" href="#Relaxation.Meta">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">Relaxation.Meta</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">RelaxationTable</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="n">volume_change</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;range&quot;</span><span class="p">],</span>
            <span class="n">band_gap</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;exact&quot;</span><span class="p">,</span> <span class="s2">&quot;range&quot;</span><span class="p">],</span>
            <span class="n">is_gap_direct</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;exact&quot;</span><span class="p">],</span>
            <span class="n">energy_fermi</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;range&quot;</span><span class="p">],</span>
            <span class="n">conduction_band_minimum</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;range&quot;</span><span class="p">],</span>
            <span class="n">valence_band_maximum</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;range&quot;</span><span class="p">],</span>
            <span class="o">**</span><span class="n">Structure</span><span class="o">.</span><span class="n">get_fields</span><span class="p">(),</span>
            <span class="o">**</span><span class="n">Calculation</span><span class="o">.</span><span class="n">get_fields</span><span class="p">(),</span>
        <span class="p">)</span>
</pre></div>

        </details>

    

                            <div id="Relaxation.Meta.__init__" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#Relaxation.Meta.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">Relaxation.Meta</span><span class="signature">()</span>
    </div>

    
    

                            </div>
                            <div id="Relaxation.Meta.fields" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#Relaxation.Meta.fields">#&nbsp;&nbsp</a>

        <span class="name">fields</span><span class="default_value"> = {&#39;volume_change&#39;: [&#39;range&#39;], &#39;band_gap&#39;: [&#39;exact&#39;, &#39;range&#39;], &#39;is_gap_direct&#39;: [&#39;exact&#39;], &#39;energy_fermi&#39;: [&#39;range&#39;], &#39;conduction_band_minimum&#39;: [&#39;range&#39;], &#39;valence_band_maximum&#39;: [&#39;range&#39;], &#39;nsites&#39;: [&#39;range&#39;], &#39;nelements&#39;: [&#39;range&#39;], &#39;density&#39;: [&#39;range&#39;], &#39;density_atomic&#39;: [&#39;range&#39;], &#39;volume&#39;: [&#39;range&#39;], &#39;volume_molar&#39;: [&#39;range&#39;], &#39;formula_full&#39;: [&#39;exact&#39;], &#39;formula_reduced&#39;: [&#39;exact&#39;], &#39;formula_anonymous&#39;: [&#39;exact&#39;], &#39;spacegroup__number&#39;: [&#39;exact&#39;], &#39;spacegroup__symbol&#39;: [&#39;exact&#39;], &#39;spacegroup__crystal_system&#39;: [&#39;exact&#39;], &#39;spacegroup__point_group&#39;: [&#39;exact&#39;], &#39;directory&#39;: [&#39;exact&#39;], &#39;prefect_flow_run_id&#39;: [&#39;exact&#39;], &#39;created_at&#39;: [&#39;range&#39;], &#39;updated_at&#39;: [&#39;range&#39;]}</span>
    </div>

    
    

                            </div>
                </section>
                <section id="Relaxation.Meta.model">
                                <div class="attr class">
        <a class="headerlink" href="#Relaxation.Meta.model">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">Relaxation.Meta.model</span><wbr>(<span class="base"><a href="../../../database/base_data_types/structure.html#Structure">simmate.database.base_data_types.structure.Structure</a></span>, <span class="base"><a href="../../../database/base_data_types/calculation.html#Calculation">simmate.database.base_data_types.calculation.Calculation</a></span>):
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Relaxation</span><span class="p">(</span><span class="n">Structure</span><span class="p">,</span> <span class="n">Calculation</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This table holds all data from a structure relaxation and also links to</span>
<span class="sd">    IonicStep table which holds all of the structure/energy/forces for each</span>
<span class="sd">    ionic step.</span>

<span class="sd">    WARNING: The Structure stored in this table here is the source structure</span>
<span class="sd">    until the calculation completes. After completed, the structure will</span>
<span class="sd">    be updated to the final structure. If you wish to ensure you&#39;re accessing</span>
<span class="sd">    the correct structure, use the `structure_final` attribute, which gives</span>
<span class="sd">    the final IonicStep.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">abstract</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">app_label</span> <span class="o">=</span> <span class="s2">&quot;workflows&quot;</span>

    <span class="n">base_info</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">[</span>
            <span class="s2">&quot;band_gap&quot;</span><span class="p">,</span>
            <span class="s2">&quot;is_gap_direct&quot;</span><span class="p">,</span>
            <span class="s2">&quot;energy_fermi&quot;</span><span class="p">,</span>
            <span class="s2">&quot;conduction_band_minimum&quot;</span><span class="p">,</span>
            <span class="s2">&quot;valence_band_maximum&quot;</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="o">+</span> <span class="n">Structure</span><span class="o">.</span><span class="n">base_info</span>
        <span class="o">+</span> <span class="n">Calculation</span><span class="o">.</span><span class="n">base_info</span>
    <span class="p">)</span>

    <span class="c1"># OPTIMIZE: should I include this electronic data?</span>
    <span class="c1"># This data here is something we only get for the final structure, so it</span>
    <span class="c1"># may make sense to move this data into the IonicStepStructure table (and</span>
    <span class="c1"># allow null values for non-final steps). I instead keep this here because</span>
    <span class="c1"># I don&#39;t want columns above that are largely empty.</span>
    <span class="c1"># Note: all entries are optional because there is no guaruntee the calculation</span>
    <span class="c1"># finishes successfully</span>

    <span class="n">band_gap</span> <span class="o">=</span> <span class="n">table_column</span><span class="o">.</span><span class="n">FloatField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The band gap energy in eV.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">is_gap_direct</span> <span class="o">=</span> <span class="n">table_column</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Whether the band gap is direct or indirect.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">energy_fermi</span> <span class="o">=</span> <span class="n">table_column</span><span class="o">.</span><span class="n">FloatField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The Fermi energy in eV.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">conduction_band_minimum</span> <span class="o">=</span> <span class="n">table_column</span><span class="o">.</span><span class="n">FloatField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The conduction band minimum in eV.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">valence_band_maximum</span> <span class="o">=</span> <span class="n">table_column</span><span class="o">.</span><span class="n">FloatField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The valence band maximum in eV.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">volume_change</span> <span class="o">=</span> <span class="n">table_column</span><span class="o">.</span><span class="n">FloatField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The percent volume change during the relaxation. This is useful for checking</span>
<span class="sd">    if Pulay Stress may be significant or if the structure was highly unreasonable.</span>
<span class="sd">    We store this as a ratio relative to the starting structure:</span>
<span class="sd">    ```</span>
<span class="sd">    (volume_final - volume_start) / volume_start</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="sd">&quot;&quot;&quot; Relationships &quot;&quot;&quot;</span>
    <span class="c1"># structure_start --&gt; points to first (0) IonicStep</span>
    <span class="c1"># structure_final --&gt; points to final IonicStep</span>
    <span class="c1"># structures --&gt; gives list of all IonicSteps</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create_subclasses</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">module</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">extra_columns</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Dynamically creates a subclass of Relaxation as well as a separate IonicStep</span>
<span class="sd">        table for it. These tables are linked together.</span>

<span class="sd">        Example use:</span>

<span class="sd">        ``` python</span>
<span class="sd">        from simmate.database.base_data_types import Relaxation</span>

<span class="sd">        ExampleRelaxation, ExampleIonicStep = Relaxation.create_subclasses(</span>
<span class="sd">            &quot;Example&quot;,</span>
<span class="sd">            module=__name__,</span>
<span class="sd">        )</span>
<span class="sd">        ```</span>

<span class="sd">        #### Parameters</span>

<span class="sd">        - `name` :</span>
<span class="sd">            The prefix name of the subclasses that are output. &quot;Relaxation&quot; and</span>
<span class="sd">            &quot;IonicStep&quot; will be attached to the end of this prefix.</span>
<span class="sd">        - `module` :</span>
<span class="sd">            name of the module this subclass should be associated with. Typically,</span>
<span class="sd">            you should pass __name__ to this.</span>
<span class="sd">        - `**extra_columns` :</span>
<span class="sd">            Additional columns to add to the table. The keyword will be the</span>
<span class="sd">            column name and the value should match django options</span>
<span class="sd">            (e.g. table_column.FloatField())</span>

<span class="sd">        #### Returns</span>

<span class="sd">        - `NewRelaxationClass` :</span>
<span class="sd">            A subclass of Relaxation.</span>
<span class="sd">        - `NewIonicStepClass`:</span>
<span class="sd">            A subclass of IonicStep.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># For convience, we add columns that point to the start and end structures</span>
        <span class="n">NewRelaxationClass</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">create_subclass</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">Relaxation&quot;</span><span class="p">,</span>
            <span class="n">structure_start</span><span class="o">=</span><span class="n">table_column</span><span class="o">.</span><span class="n">OneToOneField</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">IonicStep&quot;</span><span class="p">,</span>
                <span class="n">on_delete</span><span class="o">=</span><span class="n">table_column</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span>
                <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;relaxations_as_start&quot;</span><span class="p">,</span>
                <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">structure_final</span><span class="o">=</span><span class="n">table_column</span><span class="o">.</span><span class="n">OneToOneField</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">IonicStep&quot;</span><span class="p">,</span>
                <span class="n">on_delete</span><span class="o">=</span><span class="n">table_column</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span>
                <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;relaxations_as_final&quot;</span><span class="p">,</span>
                <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">module</span><span class="o">=</span><span class="n">module</span><span class="p">,</span>
            <span class="o">**</span><span class="n">extra_columns</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">NewIonicStepClass</span> <span class="o">=</span> <span class="n">IonicStep</span><span class="o">.</span><span class="n">create_subclass_from_relaxation</span><span class="p">(</span>
            <span class="n">name</span><span class="p">,</span>
            <span class="n">NewRelaxationClass</span><span class="p">,</span>
            <span class="n">module</span><span class="o">=</span><span class="n">module</span><span class="p">,</span>
            <span class="o">**</span><span class="n">extra_columns</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># we now have a new child class and avoided writing some boilerplate code!</span>
        <span class="k">return</span> <span class="n">NewRelaxationClass</span><span class="p">,</span> <span class="n">NewIonicStepClass</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_directory</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">directory</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="c1"># I assume the directory is from a vasp calculation, but I need to update</span>
        <span class="c1"># this when I begin adding new calculators.</span>
        <span class="n">vasprun_filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="s2">&quot;vasprun.xml&quot;</span><span class="p">)</span>
        <span class="n">vasprun</span> <span class="o">=</span> <span class="n">Vasprun</span><span class="p">(</span><span class="n">vasprun_filename</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_vasp_run</span><span class="p">(</span><span class="n">vasprun</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_vasp_run</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">vasprun</span><span class="p">:</span> <span class="n">Vasprun</span><span class="p">):</span>
        <span class="c1"># The data is actually easier to access as a dictionary and everything</span>
        <span class="c1"># we need is stored under the &quot;output&quot; key</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">vasprun</span><span class="o">.</span><span class="n">as_dict</span><span class="p">()[</span><span class="s2">&quot;output&quot;</span><span class="p">]</span>

        <span class="c1"># The only other data we need to grab is the list of structures. We can</span>
        <span class="c1"># pull the structure for each ionic step from the vasprun class directly.</span>
        <span class="n">structures</span> <span class="o">=</span> <span class="n">vasprun</span><span class="o">.</span><span class="n">structures</span>

        <span class="c1"># Make the relaxation entry. Note we need to save this to the database</span>
        <span class="c1"># in order to link/save the ionic steps below. We save the structure</span>
        <span class="c1"># as the final one in the calculation.</span>
        <span class="n">relaxation</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_toolkit</span><span class="p">(</span>
            <span class="n">structure</span><span class="o">=</span><span class="n">structures</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
            <span class="n">volume_change</span><span class="o">=</span><span class="p">(</span><span class="n">structures</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">volume</span> <span class="o">-</span> <span class="n">structures</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">volume</span><span class="p">)</span>
            <span class="o">/</span> <span class="n">structures</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">volume</span><span class="p">,</span>
            <span class="n">band_gap</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;bandgap&quot;</span><span class="p">),</span>
            <span class="n">is_gap_direct</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;is_gap_direct&quot;</span><span class="p">),</span>
            <span class="n">energy_fermi</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;efermi&quot;</span><span class="p">),</span>
            <span class="n">conduction_band_minimum</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;cbm&quot;</span><span class="p">),</span>
            <span class="n">valence_band_maximum</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;vbm&quot;</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="c1"># lastly, we also want to save the corrections made and directory it ran in</span>
        <span class="c1"># relaxation.corrections = corrections</span>
        <span class="c1"># relaxation.directory = directory</span>

        <span class="c1"># Now we have the relaxation data all loaded and can save it to the database</span>
        <span class="n">relaxation</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

        <span class="c1"># Now let&#39;s iterate through the ionic steps and save these to the database.</span>
        <span class="k">for</span> <span class="n">number</span><span class="p">,</span> <span class="p">(</span><span class="n">structure</span><span class="p">,</span> <span class="n">ionic_step</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
            <span class="nb">zip</span><span class="p">(</span><span class="n">structures</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;ionic_steps&quot;</span><span class="p">])</span>
        <span class="p">):</span>
            <span class="c1"># first pull all the data together and save it to the database. We</span>
            <span class="c1"># are saving this to an IonicStepStructure datatable.</span>
            <span class="n">structure_db</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">from_toolkit</span><span class="p">(</span>
                <span class="n">number</span><span class="o">=</span><span class="n">number</span><span class="p">,</span>
                <span class="n">structure</span><span class="o">=</span><span class="n">structure</span><span class="p">,</span>
                <span class="n">energy</span><span class="o">=</span><span class="n">ionic_step</span><span class="p">[</span><span class="s2">&quot;e_wo_entrp&quot;</span><span class="p">],</span>
                <span class="n">site_forces</span><span class="o">=</span><span class="n">ionic_step</span><span class="p">[</span><span class="s2">&quot;forces&quot;</span><span class="p">],</span>
                <span class="n">lattice_stress</span><span class="o">=</span><span class="n">ionic_step</span><span class="p">[</span><span class="s2">&quot;stress&quot;</span><span class="p">],</span>
                <span class="n">relaxation</span><span class="o">=</span><span class="n">relaxation</span><span class="p">,</span>  <span class="c1"># this links the structure to this relaxation</span>
            <span class="p">)</span>
            <span class="n">structure_db</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

            <span class="c1"># If this is the first structure, we want to link it as such</span>
            <span class="k">if</span> <span class="n">number</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">relaxation</span><span class="o">.</span><span class="n">structure_start_id</span> <span class="o">=</span> <span class="n">structure_db</span><span class="o">.</span><span class="n">id</span>
            <span class="c1"># and same for the final structure. Note, we can&#39;t use elif becuase</span>
            <span class="c1"># there&#39;s a chance the start/end structure are the same, which occurs</span>
            <span class="c1"># when the starting structure is found to be relaxed already.</span>
            <span class="k">if</span> <span class="n">number</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">structures</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">relaxation</span><span class="o">.</span><span class="n">structure_final_id</span> <span class="o">=</span> <span class="n">structure_db</span><span class="o">.</span><span class="n">id</span>

        <span class="k">return</span> <span class="n">relaxation</span>

    <span class="k">def</span> <span class="nf">update_from_vasp_run</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">vasprun</span><span class="p">:</span> <span class="n">Vasprun</span><span class="p">,</span>
        <span class="n">corrections</span><span class="p">:</span> <span class="n">List</span><span class="p">,</span>
        <span class="n">directory</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given a Vasprun object from a finished relaxation, this will update the</span>
<span class="sd">        Relaxation table entry and the corresponding IonicStep entries.</span>

<span class="sd">        #### Parameters</span>

<span class="sd">        vasprun :</span>
<span class="sd">            The final Vasprun object from the relaxation outputs.</span>
<span class="sd">        corrections :</span>
<span class="sd">            List of errors and corrections applied to during the relaxation.</span>
<span class="sd">        directory :</span>
<span class="sd">            name of the directory that relaxation was ran in. This is only used</span>
<span class="sd">            to reference the archive file if it&#39;s ever needed again.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># The data is actually easier to access as a dictionary and everything</span>
        <span class="c1"># we need is stored under the &quot;output&quot; key</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">vasprun</span><span class="o">.</span><span class="n">as_dict</span><span class="p">()[</span><span class="s2">&quot;output&quot;</span><span class="p">]</span>

        <span class="c1"># The only other data we need to grab is the list of structures. We can</span>
        <span class="c1"># pull the structure for each ionic step from the vasprun class directly.</span>
        <span class="n">structures</span> <span class="o">=</span> <span class="n">vasprun</span><span class="o">.</span><span class="n">structures</span>

        <span class="c1"># Now let&#39;s iterate through the ionic steps and save these to the database.</span>
        <span class="k">for</span> <span class="n">number</span><span class="p">,</span> <span class="p">(</span><span class="n">structure</span><span class="p">,</span> <span class="n">ionic_step</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
            <span class="nb">zip</span><span class="p">(</span><span class="n">structures</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;ionic_steps&quot;</span><span class="p">])</span>
        <span class="p">):</span>
            <span class="c1"># first pull all the data together and save it to the database. We</span>
            <span class="c1"># are saving this to an IonicStepStructure datatable. To access this</span>
            <span class="c1"># model, we look need to use &quot;structures.model&quot;.</span>
            <span class="n">structure</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">from_toolkit</span><span class="p">(</span>
                <span class="n">number</span><span class="o">=</span><span class="n">number</span><span class="p">,</span>
                <span class="n">structure</span><span class="o">=</span><span class="n">structure</span><span class="p">,</span>
                <span class="n">energy</span><span class="o">=</span><span class="n">ionic_step</span><span class="p">[</span><span class="s2">&quot;e_wo_entrp&quot;</span><span class="p">],</span>
                <span class="n">site_forces</span><span class="o">=</span><span class="n">ionic_step</span><span class="p">[</span><span class="s2">&quot;forces&quot;</span><span class="p">],</span>
                <span class="n">lattice_stress</span><span class="o">=</span><span class="n">ionic_step</span><span class="p">[</span><span class="s2">&quot;stress&quot;</span><span class="p">],</span>
                <span class="n">relaxation</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>  <span class="c1"># this links the structure to this relaxation</span>
            <span class="p">)</span>
            <span class="n">structure</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

            <span class="c1"># If this is the first structure, we want to link it as such</span>
            <span class="k">if</span> <span class="n">number</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">structure_start_id</span> <span class="o">=</span> <span class="n">structure</span><span class="o">.</span><span class="n">id</span>
            <span class="c1"># and same for the final structure. Note, we can&#39;t use elif becuase</span>
            <span class="c1"># there&#39;s a chance the start/end structure are the same, which occurs</span>
            <span class="c1"># when the starting structure is found to be relaxed already.</span>
            <span class="k">if</span> <span class="n">number</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">structures</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">structure_final_id</span> <span class="o">=</span> <span class="n">structure</span><span class="o">.</span><span class="n">id</span>
        <span class="c1"># calculate extra data for storing</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">volume_change</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">structures</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">volume</span> <span class="o">-</span> <span class="n">structures</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">volume</span>
        <span class="p">)</span> <span class="o">/</span> <span class="n">structures</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">volume</span>

        <span class="c1"># There is also extra data for the final structure that we save directly</span>
        <span class="c1"># in the relaxation table.  We use .get() in case the key isn&#39;t provided.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">band_gap</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;bandgap&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_gap_direct</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;is_gap_direct&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">energy_fermi</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;efermi&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">conduction_band_minimum</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;cbm&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valence_band_maximum</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;vbm&quot;</span><span class="p">)</span>

        <span class="c1"># lastly, we also want to save the corrections made and directory it ran in</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">corrections</span> <span class="o">=</span> <span class="n">corrections</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">directory</span> <span class="o">=</span> <span class="n">directory</span>

        <span class="c1"># Now we have the relaxation data all loaded and can save it to the database</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_convergence_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="c1"># Grab the calculation&#39;s structure and convert it to a dataframe</span>
        <span class="n">structures_dataframe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s2">&quot;number&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span>

        <span class="c1"># We will be making a figure that consists of 3 stacked subplots that</span>
        <span class="c1"># all share the x-axis of ionic_step_number</span>
        <span class="n">figure</span> <span class="o">=</span> <span class="n">make_subplots</span><span class="p">(</span>
            <span class="n">rows</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
            <span class="n">cols</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">shared_xaxes</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Generate a plot for Energy (per atom)</span>
        <span class="n">figure</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span>
            <span class="n">plotly_go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
                <span class="n">x</span><span class="o">=</span><span class="n">structures_dataframe</span><span class="p">[</span><span class="s2">&quot;number&quot;</span><span class="p">],</span>
                <span class="n">y</span><span class="o">=</span><span class="n">structures_dataframe</span><span class="p">[</span><span class="s2">&quot;energy_per_atom&quot;</span><span class="p">],</span>
            <span class="p">),</span>
            <span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">col</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Generate a plot for Forces (norm per atom)</span>
        <span class="n">figure</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span>
            <span class="n">plotly_go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
                <span class="n">x</span><span class="o">=</span><span class="n">structures_dataframe</span><span class="p">[</span><span class="s2">&quot;number&quot;</span><span class="p">],</span>
                <span class="n">y</span><span class="o">=</span><span class="n">structures_dataframe</span><span class="p">[</span><span class="s2">&quot;site_forces_norm_per_atom&quot;</span><span class="p">],</span>
            <span class="p">),</span>
            <span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="n">col</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Generate a plot for Stress (norm per atom)</span>
        <span class="n">figure</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span>
            <span class="n">plotly_go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
                <span class="n">x</span><span class="o">=</span><span class="n">structures_dataframe</span><span class="p">[</span><span class="s2">&quot;number&quot;</span><span class="p">],</span>
                <span class="n">y</span><span class="o">=</span><span class="n">structures_dataframe</span><span class="p">[</span><span class="s2">&quot;lattice_stress_norm_per_atom&quot;</span><span class="p">],</span>
            <span class="p">),</span>
            <span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
            <span class="n">col</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Now let&#39;s clean up some formatting and add the axes titles</span>
        <span class="n">figure</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span>
            <span class="n">width</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span>
            <span class="n">height</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span>
            <span class="n">showlegend</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">xaxis3_title</span><span class="o">=</span><span class="s2">&quot;Ionic Step (#)&quot;</span><span class="p">,</span>
            <span class="n">yaxis_title</span><span class="o">=</span><span class="s2">&quot;Energy (eV/atom)&quot;</span><span class="p">,</span>
            <span class="n">yaxis2_title</span><span class="o">=</span><span class="s2">&quot;Site Forces&quot;</span><span class="p">,</span>
            <span class="n">yaxis3_title</span><span class="o">=</span><span class="s2">&quot;Lattice Stress&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># we return the figure object for the user</span>
        <span class="k">return</span> <span class="n">figure</span>

    <span class="k">def</span> <span class="nf">view_convergence_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">figure</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_convergence_plot</span><span class="p">()</span>
        <span class="n">figure</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">renderer</span><span class="o">=</span><span class="s2">&quot;browser&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_convergence_plot_html</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Make the convergence figure and convert it to an html div</span>
        <span class="n">figure_convergence</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_convergence_plot</span><span class="p">()</span>
        <span class="n">figure_convergence_html</span> <span class="o">=</span> <span class="n">figure_convergence</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span>
            <span class="n">full_html</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">include_plotlyjs</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">figure_convergence_html</span>
</pre></div>

        </details>

            <div class="docstring"><p>This table holds all data from a structure relaxation and also links to
IonicStep table which holds all of the structure/energy/forces for each
ionic step.</p>

<p>WARNING: The Structure stored in this table here is the source structure
until the calculation completes. After completed, the structure will
be updated to the final structure. If you wish to ensure you're accessing
the correct structure, use the <code>structure_final</code> attribute, which gives
the final IonicStep.</p>
</div>


                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>django.db.models.base.Model</dt>
                                <dd id="Relaxation.Meta.model.__init__" class="function">Model</dd>
                <dd id="Relaxation.Meta.model.from_db" class="function">from_db</dd>
                <dd id="Relaxation.Meta.model.pk" class="variable">pk</dd>
                <dd id="Relaxation.Meta.model.get_deferred_fields" class="function">get_deferred_fields</dd>
                <dd id="Relaxation.Meta.model.refresh_from_db" class="function">refresh_from_db</dd>
                <dd id="Relaxation.Meta.model.serializable_value" class="function">serializable_value</dd>
                <dd id="Relaxation.Meta.model.save" class="function">save</dd>
                <dd id="Relaxation.Meta.model.save_base" class="function">save_base</dd>
                <dd id="Relaxation.Meta.model.delete" class="function">delete</dd>
                <dd id="Relaxation.Meta.model.prepare_database_save" class="function">prepare_database_save</dd>
                <dd id="Relaxation.Meta.model.clean" class="function">clean</dd>
                <dd id="Relaxation.Meta.model.validate_unique" class="function">validate_unique</dd>
                <dd id="Relaxation.Meta.model.date_error_message" class="function">date_error_message</dd>
                <dd id="Relaxation.Meta.model.unique_error_message" class="function">unique_error_message</dd>
                <dd id="Relaxation.Meta.model.full_clean" class="function">full_clean</dd>
                <dd id="Relaxation.Meta.model.clean_fields" class="function">clean_fields</dd>
                <dd id="Relaxation.Meta.model.check" class="function">check</dd>

            </div>
            <div><dt><a href="../../../database/base_data_types/relaxation.html#Relaxation">simmate.database.base_data_types.relaxation.Relaxation</a></dt>
                                <dd id="Relaxation.Meta.model.Meta" class="class"><a href="../../../database/base_data_types/relaxation.html#Relaxation.Meta">Meta</a></dd>
                <dd id="Relaxation.Meta.model.base_info" class="variable"><a href="../../../database/base_data_types/relaxation.html#Relaxation.base_info">base_info</a></dd>
                <dd id="Relaxation.Meta.model.band_gap" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.band_gap">band_gap</a></dd>
                <dd id="Relaxation.Meta.model.is_gap_direct" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.is_gap_direct">is_gap_direct</a></dd>
                <dd id="Relaxation.Meta.model.energy_fermi" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.energy_fermi">energy_fermi</a></dd>
                <dd id="Relaxation.Meta.model.conduction_band_minimum" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.conduction_band_minimum">conduction_band_minimum</a></dd>
                <dd id="Relaxation.Meta.model.valence_band_maximum" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.valence_band_maximum">valence_band_maximum</a></dd>
                <dd id="Relaxation.Meta.model.volume_change" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.volume_change">volume_change</a></dd>
                <dd id="Relaxation.Meta.model.create_subclasses" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.create_subclasses">create_subclasses</a></dd>
                <dd id="Relaxation.Meta.model.from_directory" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.from_directory">from_directory</a></dd>
                <dd id="Relaxation.Meta.model.from_vasp_run" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.from_vasp_run">from_vasp_run</a></dd>
                <dd id="Relaxation.Meta.model.update_from_vasp_run" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.update_from_vasp_run">update_from_vasp_run</a></dd>
                <dd id="Relaxation.Meta.model.get_convergence_plot" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.get_convergence_plot">get_convergence_plot</a></dd>
                <dd id="Relaxation.Meta.model.view_convergence_plot" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.view_convergence_plot">view_convergence_plot</a></dd>
                <dd id="Relaxation.Meta.model.get_convergence_plot_html" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.get_convergence_plot_html">get_convergence_plot_html</a></dd>
                <dd id="Relaxation.Meta.model.structure_string" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.structure_string">structure_string</a></dd>
                <dd id="Relaxation.Meta.model.nsites" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.nsites">nsites</a></dd>
                <dd id="Relaxation.Meta.model.nelements" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.nelements">nelements</a></dd>
                <dd id="Relaxation.Meta.model.elements" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.elements">elements</a></dd>
                <dd id="Relaxation.Meta.model.chemical_system" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.chemical_system">chemical_system</a></dd>
                <dd id="Relaxation.Meta.model.density" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.density">density</a></dd>
                <dd id="Relaxation.Meta.model.density_atomic" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.density_atomic">density_atomic</a></dd>
                <dd id="Relaxation.Meta.model.volume" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.volume">volume</a></dd>
                <dd id="Relaxation.Meta.model.volume_molar" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.volume_molar">volume_molar</a></dd>
                <dd id="Relaxation.Meta.model.formula_full" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.formula_full">formula_full</a></dd>
                <dd id="Relaxation.Meta.model.formula_reduced" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.formula_reduced">formula_reduced</a></dd>
                <dd id="Relaxation.Meta.model.formula_anonymous" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.formula_anonymous">formula_anonymous</a></dd>
                <dd id="Relaxation.Meta.model.spacegroup" class="variable"><a href="../../../database/base_data_types/relaxation.html#Relaxation.spacegroup">spacegroup</a></dd>
                <dd id="Relaxation.Meta.model.directory" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.directory">directory</a></dd>
                <dd id="Relaxation.Meta.model.prefect_flow_run_id" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.prefect_flow_run_id">prefect_flow_run_id</a></dd>
                <dd id="Relaxation.Meta.model.created_at" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.created_at">created_at</a></dd>
                <dd id="Relaxation.Meta.model.updated_at" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.updated_at">updated_at</a></dd>
                <dd id="Relaxation.Meta.model.corrections" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.corrections">corrections</a></dd>
                <dd id="Relaxation.Meta.model.source" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.source">source</a></dd>
                <dd id="Relaxation.Meta.model.spacegroup_id" class="variable"><a href="../../../database/base_data_types/relaxation.html#Relaxation.spacegroup_id">spacegroup_id</a></dd>
                <dd id="Relaxation.Meta.model.get_next_by_created_at" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.get_next_by_created_at">get_next_by_created_at</a></dd>
                <dd id="Relaxation.Meta.model.get_previous_by_created_at" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.get_previous_by_created_at">get_previous_by_created_at</a></dd>
                <dd id="Relaxation.Meta.model.get_next_by_updated_at" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.get_next_by_updated_at">get_next_by_updated_at</a></dd>
                <dd id="Relaxation.Meta.model.get_previous_by_updated_at" class="function"><a href="../../../database/base_data_types/relaxation.html#Relaxation.get_previous_by_updated_at">get_previous_by_updated_at</a></dd>

            </div>
            <div><dt><a href="../../../database/base_data_types/structure.html#Structure">simmate.database.base_data_types.structure.Structure</a></dt>
                                <dd id="Relaxation.Meta.model.to_toolkit" class="function"><a href="../../../database/base_data_types/structure.html#Structure.to_toolkit">to_toolkit</a></dd>

            </div>
            <div><dt><a href="../../../database/base_data_types/calculation.html#Calculation">simmate.database.base_data_types.calculation.Calculation</a></dt>
                                <dd id="Relaxation.Meta.model.prefect_cloud_link" class="variable"><a href="../../../database/base_data_types/calculation.html#Calculation.prefect_cloud_link">prefect_cloud_link</a></dd>
                <dd id="Relaxation.Meta.model.flow_run_view" class="variable"><a href="../../../database/base_data_types/calculation.html#Calculation.flow_run_view">flow_run_view</a></dd>
                <dd id="Relaxation.Meta.model.prefect_flow_run_name" class="variable"><a href="../../../database/base_data_types/calculation.html#Calculation.prefect_flow_run_name">prefect_flow_run_name</a></dd>
                <dd id="Relaxation.Meta.model.prefect_state" class="variable"><a href="../../../database/base_data_types/calculation.html#Calculation.prefect_state">prefect_state</a></dd>
                <dd id="Relaxation.Meta.model.from_prefect_id" class="function"><a href="../../../database/base_data_types/calculation.html#Calculation.from_prefect_id">from_prefect_id</a></dd>

            </div>
            <div><dt><a href="../../../database/base_data_types/base.html#DatabaseTable">simmate.database.base_data_types.base.DatabaseTable</a></dt>
                                <dd id="Relaxation.Meta.model.source_doi" class="variable"><a href="../../../database/base_data_types/base.html#DatabaseTable.source_doi">source_doi</a></dd>
                <dd id="Relaxation.Meta.model.remote_archive_link" class="variable"><a href="../../../database/base_data_types/base.html#DatabaseTable.remote_archive_link">remote_archive_link</a></dd>
                <dd id="Relaxation.Meta.model.objects" class="function"><a href="../../../database/base_data_types/base.html#DatabaseTable.objects">objects</a></dd>
                <dd id="Relaxation.Meta.model.get_table_name" class="function"><a href="../../../database/base_data_types/base.html#DatabaseTable.get_table_name">get_table_name</a></dd>
                <dd id="Relaxation.Meta.model.create_subclass" class="function"><a href="../../../database/base_data_types/base.html#DatabaseTable.create_subclass">create_subclass</a></dd>
                <dd id="Relaxation.Meta.model.from_toolkit" class="function"><a href="../../../database/base_data_types/base.html#DatabaseTable.from_toolkit">from_toolkit</a></dd>
                <dd id="Relaxation.Meta.model.load_archive" class="function"><a href="../../../database/base_data_types/base.html#DatabaseTable.load_archive">load_archive</a></dd>
                <dd id="Relaxation.Meta.model.load_remote_archive" class="function"><a href="../../../database/base_data_types/base.html#DatabaseTable.load_remote_archive">load_remote_archive</a></dd>
                <dd id="Relaxation.Meta.model.get_column_names" class="function"><a href="../../../database/base_data_types/base.html#DatabaseTable.get_column_names">get_column_names</a></dd>
                <dd id="Relaxation.Meta.model.show_columns" class="function"><a href="../../../database/base_data_types/base.html#DatabaseTable.show_columns">show_columns</a></dd>
                <dd id="Relaxation.Meta.model.get_mixins" class="function"><a href="../../../database/base_data_types/base.html#DatabaseTable.get_mixins">get_mixins</a></dd>
                <dd id="Relaxation.Meta.model.get_mixin_names" class="function"><a href="../../../database/base_data_types/base.html#DatabaseTable.get_mixin_names">get_mixin_names</a></dd>
                <dd id="Relaxation.Meta.model.get_extra_columns" class="function"><a href="../../../database/base_data_types/base.html#DatabaseTable.get_extra_columns">get_extra_columns</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="IonicStep">
                                <div class="attr class">
        <a class="headerlink" href="#IonicStep">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">IonicStep</span><wbr>(<span class="base"><a href="structure.html#Structure">simmate.website.core_components.filters.structure.Structure</a></span>, <span class="base"><a href="forces.html#Forces">simmate.website.core_components.filters.forces.Forces</a></span>, <span class="base"><a href="thermodynamics.html#Thermodynamics">simmate.website.core_components.filters.thermodynamics.Thermodynamics</a></span>):
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span><span class="k">class</span> <span class="nc">IonicStep</span><span class="p">(</span><span class="n">Structure</span><span class="p">,</span> <span class="n">Forces</span><span class="p">,</span> <span class="n">Thermodynamics</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">IonicStepTable</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="o">**</span><span class="n">Structure</span><span class="o">.</span><span class="n">get_fields</span><span class="p">(),</span>
            <span class="o">**</span><span class="n">Thermodynamics</span><span class="o">.</span><span class="n">get_fields</span><span class="p">(),</span>
            <span class="o">**</span><span class="n">Forces</span><span class="o">.</span><span class="n">get_fields</span><span class="p">(),</span>
        <span class="p">)</span>
</pre></div>

        </details>

    

                            <div id="IonicStep.declared_filters" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#IonicStep.declared_filters">#&nbsp;&nbsp</a>

        <span class="name">declared_filters</span><span class="default_value"> = OrderedDict([(&#39;include_subsystems&#39;, &lt;django_filters.rest_framework.filters.BooleanFilter object&gt;), (&#39;chemical_system&#39;, &lt;django_filters.filters.CharFilter object&gt;)])</span>
    </div>

    
    

                            </div>
                            <div id="IonicStep.base_filters" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#IonicStep.base_filters">#&nbsp;&nbsp</a>

        <span class="name">base_filters</span><span class="default_value"> = OrderedDict([(&#39;nsites__range&#39;, &lt;django_filters.filterset.BaseFilterSet.filter_for_lookup.&lt;locals&gt;.ConcreteRangeFilter object&gt;), (&#39;nelements__range&#39;, &lt;django_filters.filterset.BaseFilterSet.filter_for_lookup.&lt;locals&gt;.ConcreteRangeFilter object&gt;), (&#39;density__range&#39;, &lt;django_filters.filterset.BaseFilterSet.filter_for_lookup.&lt;locals&gt;.ConcreteRangeFilter object&gt;), (&#39;density_atomic__range&#39;, &lt;django_filters.filterset.BaseFilterSet.filter_for_lookup.&lt;locals&gt;.ConcreteRangeFilter object&gt;), (&#39;volume__range&#39;, &lt;django_filters.filterset.BaseFilterSet.filter_for_lookup.&lt;locals&gt;.ConcreteRangeFilter object&gt;), (&#39;volume_molar__range&#39;, &lt;django_filters.filterset.BaseFilterSet.filter_for_lookup.&lt;locals&gt;.ConcreteRangeFilter object&gt;), (&#39;formula_full&#39;, &lt;django_filters.filters.CharFilter object&gt;), (&#39;formula_reduced&#39;, &lt;django_filters.filters.CharFilter object&gt;), (&#39;formula_anonymous&#39;, &lt;django_filters.filters.CharFilter object&gt;), (&#39;spacegroup__number&#39;, &lt;django_filters.filters.NumberFilter object&gt;), (&#39;spacegroup__symbol&#39;, &lt;django_filters.filters.CharFilter object&gt;), (&#39;spacegroup__crystal_system&#39;, &lt;django_filters.filters.CharFilter object&gt;), (&#39;spacegroup__point_group&#39;, &lt;django_filters.filters.CharFilter object&gt;), (&#39;energy__range&#39;, &lt;django_filters.filterset.BaseFilterSet.filter_for_lookup.&lt;locals&gt;.ConcreteRangeFilter object&gt;), (&#39;energy_per_atom__range&#39;, &lt;django_filters.filterset.BaseFilterSet.filter_for_lookup.&lt;locals&gt;.ConcreteRangeFilter object&gt;), (&#39;energy_above_hull__range&#39;, &lt;django_filters.filterset.BaseFilterSet.filter_for_lookup.&lt;locals&gt;.ConcreteRangeFilter object&gt;), (&#39;is_stable&#39;, &lt;django_filters.rest_framework.filters.BooleanFilter object&gt;), (&#39;formation_energy__range&#39;, &lt;django_filters.filterset.BaseFilterSet.filter_for_lookup.&lt;locals&gt;.ConcreteRangeFilter object&gt;), (&#39;formation_energy_per_atom__range&#39;, &lt;django_filters.filterset.BaseFilterSet.filter_for_lookup.&lt;locals&gt;.ConcreteRangeFilter object&gt;), (&#39;site_force_norm_max__range&#39;, &lt;django_filters.filterset.BaseFilterSet.filter_for_lookup.&lt;locals&gt;.ConcreteRangeFilter object&gt;), (&#39;site_forces_norm_per_atom__range&#39;, &lt;django_filters.filterset.BaseFilterSet.filter_for_lookup.&lt;locals&gt;.ConcreteRangeFilter object&gt;), (&#39;lattice_stress_norm__range&#39;, &lt;django_filters.filterset.BaseFilterSet.filter_for_lookup.&lt;locals&gt;.ConcreteRangeFilter object&gt;), (&#39;lattice_stress_norm_per_atom__range&#39;, &lt;django_filters.filterset.BaseFilterSet.filter_for_lookup.&lt;locals&gt;.ConcreteRangeFilter object&gt;), (&#39;include_subsystems&#39;, &lt;django_filters.rest_framework.filters.BooleanFilter object&gt;), (&#39;chemical_system&#39;, &lt;django_filters.filters.CharFilter object&gt;)])</span>
    </div>

    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>django_filters.filterset.BaseFilterSet</dt>
                                <dd id="IonicStep.__init__" class="function">BaseFilterSet</dd>
                <dd id="IonicStep.is_valid" class="function">is_valid</dd>
                <dd id="IonicStep.errors" class="variable">errors</dd>
                <dd id="IonicStep.filter_queryset" class="function">filter_queryset</dd>
                <dd id="IonicStep.qs" class="variable">qs</dd>
                <dd id="IonicStep.get_form_class" class="function">get_form_class</dd>
                <dd id="IonicStep.get_fields" class="function">get_fields</dd>
                <dd id="IonicStep.get_filter_name" class="function">get_filter_name</dd>
                <dd id="IonicStep.get_filters" class="function">get_filters</dd>
                <dd id="IonicStep.filter_for_field" class="function">filter_for_field</dd>
                <dd id="IonicStep.filter_for_lookup" class="function">filter_for_lookup</dd>

            </div>
            <div><dt><a href="structure.html#Structure">simmate.website.core_components.filters.structure.Structure</a></dt>
                                <dd id="IonicStep.include_subsystems" class="variable"><a href="structure.html#Structure.include_subsystems">include_subsystems</a></dd>
                <dd id="IonicStep.chemical_system" class="variable"><a href="structure.html#Structure.chemical_system">chemical_system</a></dd>
                <dd id="IonicStep.skip_filter" class="function"><a href="structure.html#Structure.skip_filter">skip_filter</a></dd>
                <dd id="IonicStep.filter_chemical_system" class="function"><a href="structure.html#Structure.filter_chemical_system">filter_chemical_system</a></dd>

            </div>
            <div><dt>django_filters.rest_framework.filterset.FilterSet</dt>
                                <dd id="IonicStep.FILTER_DEFAULTS" class="variable">FILTER_DEFAULTS</dd>
                <dd id="IonicStep.form" class="variable">form</dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="IonicStep.Meta">
                                <div class="attr class">
        <a class="headerlink" href="#IonicStep.Meta">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">IonicStep.Meta</span>:
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span>    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">IonicStepTable</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="o">**</span><span class="n">Structure</span><span class="o">.</span><span class="n">get_fields</span><span class="p">(),</span>
            <span class="o">**</span><span class="n">Thermodynamics</span><span class="o">.</span><span class="n">get_fields</span><span class="p">(),</span>
            <span class="o">**</span><span class="n">Forces</span><span class="o">.</span><span class="n">get_fields</span><span class="p">(),</span>
        <span class="p">)</span>
</pre></div>

        </details>

    

                            <div id="IonicStep.Meta.__init__" class="classattr">
                                        <div class="attr function"><a class="headerlink" href="#IonicStep.Meta.__init__">#&nbsp;&nbsp</a>

        
            <span class="name">IonicStep.Meta</span><span class="signature">()</span>
    </div>

    
    

                            </div>
                            <div id="IonicStep.Meta.fields" class="classattr">
                                            <div class="attr variable"><a class="headerlink" href="#IonicStep.Meta.fields">#&nbsp;&nbsp</a>

        <span class="name">fields</span><span class="default_value"> = {&#39;nsites&#39;: [&#39;range&#39;], &#39;nelements&#39;: [&#39;range&#39;], &#39;density&#39;: [&#39;range&#39;], &#39;density_atomic&#39;: [&#39;range&#39;], &#39;volume&#39;: [&#39;range&#39;], &#39;volume_molar&#39;: [&#39;range&#39;], &#39;formula_full&#39;: [&#39;exact&#39;], &#39;formula_reduced&#39;: [&#39;exact&#39;], &#39;formula_anonymous&#39;: [&#39;exact&#39;], &#39;spacegroup__number&#39;: [&#39;exact&#39;], &#39;spacegroup__symbol&#39;: [&#39;exact&#39;], &#39;spacegroup__crystal_system&#39;: [&#39;exact&#39;], &#39;spacegroup__point_group&#39;: [&#39;exact&#39;], &#39;energy&#39;: [&#39;range&#39;], &#39;energy_per_atom&#39;: [&#39;range&#39;], &#39;energy_above_hull&#39;: [&#39;range&#39;], &#39;is_stable&#39;: [&#39;exact&#39;], &#39;formation_energy&#39;: [&#39;range&#39;], &#39;formation_energy_per_atom&#39;: [&#39;range&#39;], &#39;site_force_norm_max&#39;: [&#39;range&#39;], &#39;site_forces_norm_per_atom&#39;: [&#39;range&#39;], &#39;lattice_stress_norm&#39;: [&#39;range&#39;], &#39;lattice_stress_norm_per_atom&#39;: [&#39;range&#39;]}</span>
    </div>

    
    

                            </div>
                </section>
                <section id="IonicStep.Meta.model">
                                <div class="attr class">
        <a class="headerlink" href="#IonicStep.Meta.model">#&nbsp;&nbsp</a>

        
        <span class="def">class</span>
        <span class="name">IonicStep.Meta.model</span><wbr>(<span class="base"><a href="../../../database/base_data_types/structure.html#Structure">simmate.database.base_data_types.structure.Structure</a></span>, <span class="base"><a href="../../../database/base_data_types/thermodynamics.html#Thermodynamics">simmate.database.base_data_types.thermodynamics.Thermodynamics</a></span>, <span class="base"><a href="../../../database/base_data_types/forces.html#Forces">simmate.database.base_data_types.forces.Forces</a></span>):
    </div>

            <details>
            <summary>View Source</summary>
            <div class="pdoc-code codehilite"><pre><span></span><span class="k">class</span> <span class="nc">IonicStep</span><span class="p">(</span><span class="n">Structure</span><span class="p">,</span> <span class="n">Thermodynamics</span><span class="p">,</span> <span class="n">Forces</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This database table that holds the data for each ionic step of a relaxation.</span>

<span class="sd">    An ionic step can be viewed as a static energy calculation, but we keep these</span>
<span class="sd">    results separate because:</span>

<span class="sd">        1. Pulay stress can make these energies/forces inaccurate</span>
<span class="sd">        2. These results each have an associated Relaxation and ionic step number</span>

<span class="sd">    You will likely never access this table directly. Instead, data is better</span>
<span class="sd">    accessed through the `structures` attribute on appropiate Relaxation table.</span>

<span class="sd">    For example:</span>

<span class="sd">    ``` python</span>
<span class="sd">    from simmate.database import connect</span>
<span class="sd">    from simmate.database.workflow_results import MITRelaxation</span>

<span class="sd">    # grab your desired relaxation</span>
<span class="sd">    relax = MITRelaxation.objects.get(id=1)</span>

<span class="sd">    # grab the associated ionic steps</span>
<span class="sd">    ionic_steps = relax.structures.all()</span>
<span class="sd">    ```</span>

<span class="sd">    Note: we assume that only converged data is being stored! So there is no</span>
<span class="sd">    &quot;converged_electronic&quot; column here. ErrorHandlers and workups should</span>
<span class="sd">    ensure convergence.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">abstract</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">app_label</span> <span class="o">=</span> <span class="s2">&quot;workflows&quot;</span>

    <span class="n">base_info</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">[</span><span class="s2">&quot;number&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">Structure</span><span class="o">.</span><span class="n">base_info</span> <span class="o">+</span> <span class="n">Thermodynamics</span><span class="o">.</span><span class="n">base_info</span> <span class="o">+</span> <span class="n">Forces</span><span class="o">.</span><span class="n">base_info</span>
    <span class="p">)</span>

    <span class="n">number</span> <span class="o">=</span> <span class="n">table_column</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The ionic step number within the relaxation. This starts counting from 0.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="sd">&quot;&quot;&quot; Relationships &quot;&quot;&quot;</span>
    <span class="c1"># each of these will map to a Relaxation, so you should typically access this</span>
    <span class="c1"># data through that class. The exception to this is when you want all ionic</span>
    <span class="c1"># steps accross many relaxations for a machine learning input.</span>
    <span class="c1"># These relationship can be found via...</span>
    <span class="c1">#   relaxations</span>
    <span class="c1">#   relaxations_as_start</span>
    <span class="c1">#   relaxations_as_final</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">create_subclass_from_relaxation</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">relaxation</span><span class="p">:</span> <span class="n">Relaxation</span><span class="p">,</span>
        <span class="n">module</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">**</span><span class="n">extra_columns</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Dynamically creates a subclass of IonicStep and links it to the Relaxation</span>
<span class="sd">        table.</span>

<span class="sd">        This method should NOT be called directly because it is instead used by</span>
<span class="sd">        `Relaxation.create_subclasses`.</span>

<span class="sd">        #### Parameters</span>

<span class="sd">        - `name` :</span>
<span class="sd">            Name of the subclass that is output.</span>
<span class="sd">        - `relaxation` :</span>
<span class="sd">            Relaxation table that these ionic steps should be associated with.</span>
<span class="sd">        - `module` :</span>
<span class="sd">            name of the module this subclass should be associated with. Typically,</span>
<span class="sd">            you should pass __name__ to this.</span>
<span class="sd">        - `**extra_columns` :</span>
<span class="sd">            Additional columns to add to the table. The keyword will be the</span>
<span class="sd">            column name and the value should match django options</span>
<span class="sd">            (e.g. table_column.FloatField())</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        - `NewClass` :</span>
<span class="sd">            A subclass of IonicStep.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># All structures in this table come from relaxation calculations, where</span>
        <span class="c1"># there can be many structures (one for each ionic steps) linked to a</span>
        <span class="c1"># single relaxation. This means the start structure, end structure, and</span>
        <span class="c1"># those structure in-between are stored together here.</span>
        <span class="c1"># Therefore, there&#39;s just a simple column stating which relaxation it</span>
        <span class="c1"># belongs to.</span>
        <span class="n">NewClass</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">create_subclass</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">IonicStep&quot;</span><span class="p">,</span>
            <span class="n">relaxation</span><span class="o">=</span><span class="n">table_column</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
                <span class="n">relaxation</span><span class="p">,</span>
                <span class="n">on_delete</span><span class="o">=</span><span class="n">table_column</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span>
                <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;structures&quot;</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">module</span><span class="o">=</span><span class="n">module</span><span class="p">,</span>
            <span class="o">**</span><span class="n">extra_columns</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># we now have a new child class and avoided writing some boilerplate code!</span>
        <span class="k">return</span> <span class="n">NewClass</span>
</pre></div>

        </details>

            <div class="docstring"><p>This database table that holds the data for each ionic step of a relaxation.</p>

<p>An ionic step can be viewed as a static energy calculation, but we keep these
results separate because:</p>

<pre><code>1. Pulay stress can make these energies/forces inaccurate
2. These results each have an associated Relaxation and ionic step number
</code></pre>

<p>You will likely never access this table directly. Instead, data is better
accessed through the <code>structures</code> attribute on appropiate Relaxation table.</p>

<p>For example:</p>

<div class="pdoc-code codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn"><a href="../../../database.html">simmate.database</a></span> <span class="kn">import</span> <span class="n">connect</span>
<span class="kn">from</span> <span class="nn"><a href="../../../database/workflow_results.html">simmate.database.workflow_results</a></span> <span class="kn">import</span> <span class="n">MITRelaxation</span>

<span class="c1"># grab your desired relaxation</span>
<span class="n">relax</span> <span class="o">=</span> <span class="n">MITRelaxation</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># grab the associated ionic steps</span>
<span class="n">ionic_steps</span> <span class="o">=</span> <span class="n">relax</span><span class="o">.</span><span class="n">structures</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</code></pre></div>

<p>Note: we assume that only converged data is being stored! So there is no
"converged_electronic" column here. ErrorHandlers and workups should
ensure convergence.</p>
</div>


                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>django.db.models.base.Model</dt>
                                <dd id="IonicStep.Meta.model.__init__" class="function">Model</dd>
                <dd id="IonicStep.Meta.model.from_db" class="function">from_db</dd>
                <dd id="IonicStep.Meta.model.pk" class="variable">pk</dd>
                <dd id="IonicStep.Meta.model.get_deferred_fields" class="function">get_deferred_fields</dd>
                <dd id="IonicStep.Meta.model.refresh_from_db" class="function">refresh_from_db</dd>
                <dd id="IonicStep.Meta.model.serializable_value" class="function">serializable_value</dd>
                <dd id="IonicStep.Meta.model.save" class="function">save</dd>
                <dd id="IonicStep.Meta.model.save_base" class="function">save_base</dd>
                <dd id="IonicStep.Meta.model.delete" class="function">delete</dd>
                <dd id="IonicStep.Meta.model.prepare_database_save" class="function">prepare_database_save</dd>
                <dd id="IonicStep.Meta.model.clean" class="function">clean</dd>
                <dd id="IonicStep.Meta.model.validate_unique" class="function">validate_unique</dd>
                <dd id="IonicStep.Meta.model.date_error_message" class="function">date_error_message</dd>
                <dd id="IonicStep.Meta.model.unique_error_message" class="function">unique_error_message</dd>
                <dd id="IonicStep.Meta.model.full_clean" class="function">full_clean</dd>
                <dd id="IonicStep.Meta.model.clean_fields" class="function">clean_fields</dd>
                <dd id="IonicStep.Meta.model.check" class="function">check</dd>

            </div>
            <div><dt><a href="../../../database/base_data_types/relaxation.html#IonicStep">simmate.database.base_data_types.relaxation.IonicStep</a></dt>
                                <dd id="IonicStep.Meta.model.Meta" class="class"><a href="../../../database/base_data_types/relaxation.html#IonicStep.Meta">Meta</a></dd>
                <dd id="IonicStep.Meta.model.base_info" class="variable"><a href="../../../database/base_data_types/relaxation.html#IonicStep.base_info">base_info</a></dd>
                <dd id="IonicStep.Meta.model.number" class="function"><a href="../../../database/base_data_types/relaxation.html#IonicStep.number">number</a></dd>
                <dd id="IonicStep.Meta.model.create_subclass_from_relaxation" class="function"><a href="../../../database/base_data_types/relaxation.html#IonicStep.create_subclass_from_relaxation">create_subclass_from_relaxation</a></dd>
                <dd id="IonicStep.Meta.model.structure_string" class="function"><a href="../../../database/base_data_types/relaxation.html#IonicStep.structure_string">structure_string</a></dd>
                <dd id="IonicStep.Meta.model.nsites" class="function"><a href="../../../database/base_data_types/relaxation.html#IonicStep.nsites">nsites</a></dd>
                <dd id="IonicStep.Meta.model.nelements" class="function"><a href="../../../database/base_data_types/relaxation.html#IonicStep.nelements">nelements</a></dd>
                <dd id="IonicStep.Meta.model.elements" class="function"><a href="../../../database/base_data_types/relaxation.html#IonicStep.elements">elements</a></dd>
                <dd id="IonicStep.Meta.model.chemical_system" class="function"><a href="../../../database/base_data_types/relaxation.html#IonicStep.chemical_system">chemical_system</a></dd>
                <dd id="IonicStep.Meta.model.density" class="function"><a href="../../../database/base_data_types/relaxation.html#IonicStep.density">density</a></dd>
                <dd id="IonicStep.Meta.model.density_atomic" class="function"><a href="../../../database/base_data_types/relaxation.html#IonicStep.density_atomic">density_atomic</a></dd>
                <dd id="IonicStep.Meta.model.volume" class="function"><a href="../../../database/base_data_types/relaxation.html#IonicStep.volume">volume</a></dd>
                <dd id="IonicStep.Meta.model.volume_molar" class="function"><a href="../../../database/base_data_types/relaxation.html#IonicStep.volume_molar">volume_molar</a></dd>
                <dd id="IonicStep.Meta.model.formula_full" class="function"><a href="../../../database/base_data_types/relaxation.html#IonicStep.formula_full">formula_full</a></dd>
                <dd id="IonicStep.Meta.model.formula_reduced" class="function"><a href="../../../database/base_data_types/relaxation.html#IonicStep.formula_reduced">formula_reduced</a></dd>
                <dd id="IonicStep.Meta.model.formula_anonymous" class="function"><a href="../../../database/base_data_types/relaxation.html#IonicStep.formula_anonymous">formula_anonymous</a></dd>
                <dd id="IonicStep.Meta.model.spacegroup" class="variable"><a href="../../../database/base_data_types/relaxation.html#IonicStep.spacegroup">spacegroup</a></dd>
                <dd id="IonicStep.Meta.model.energy" class="function"><a href="../../../database/base_data_types/relaxation.html#IonicStep.energy">energy</a></dd>
                <dd id="IonicStep.Meta.model.energy_per_atom" class="function"><a href="../../../database/base_data_types/relaxation.html#IonicStep.energy_per_atom">energy_per_atom</a></dd>
                <dd id="IonicStep.Meta.model.energy_above_hull" class="function"><a href="../../../database/base_data_types/relaxation.html#IonicStep.energy_above_hull">energy_above_hull</a></dd>
                <dd id="IonicStep.Meta.model.is_stable" class="function"><a href="../../../database/base_data_types/relaxation.html#IonicStep.is_stable">is_stable</a></dd>
                <dd id="IonicStep.Meta.model.decomposes_to" class="function"><a href="../../../database/base_data_types/relaxation.html#IonicStep.decomposes_to">decomposes_to</a></dd>
                <dd id="IonicStep.Meta.model.formation_energy" class="function"><a href="../../../database/base_data_types/relaxation.html#IonicStep.formation_energy">formation_energy</a></dd>
                <dd id="IonicStep.Meta.model.formation_energy_per_atom" class="function"><a href="../../../database/base_data_types/relaxation.html#IonicStep.formation_energy_per_atom">formation_energy_per_atom</a></dd>
                <dd id="IonicStep.Meta.model.site_forces" class="function"><a href="../../../database/base_data_types/relaxation.html#IonicStep.site_forces">site_forces</a></dd>
                <dd id="IonicStep.Meta.model.lattice_stress" class="function"><a href="../../../database/base_data_types/relaxation.html#IonicStep.lattice_stress">lattice_stress</a></dd>
                <dd id="IonicStep.Meta.model.site_force_norm_max" class="function"><a href="../../../database/base_data_types/relaxation.html#IonicStep.site_force_norm_max">site_force_norm_max</a></dd>
                <dd id="IonicStep.Meta.model.site_forces_norm" class="function"><a href="../../../database/base_data_types/relaxation.html#IonicStep.site_forces_norm">site_forces_norm</a></dd>
                <dd id="IonicStep.Meta.model.site_forces_norm_per_atom" class="function"><a href="../../../database/base_data_types/relaxation.html#IonicStep.site_forces_norm_per_atom">site_forces_norm_per_atom</a></dd>
                <dd id="IonicStep.Meta.model.lattice_stress_norm" class="function"><a href="../../../database/base_data_types/relaxation.html#IonicStep.lattice_stress_norm">lattice_stress_norm</a></dd>
                <dd id="IonicStep.Meta.model.lattice_stress_norm_per_atom" class="function"><a href="../../../database/base_data_types/relaxation.html#IonicStep.lattice_stress_norm_per_atom">lattice_stress_norm_per_atom</a></dd>
                <dd id="IonicStep.Meta.model.source" class="function"><a href="../../../database/base_data_types/relaxation.html#IonicStep.source">source</a></dd>
                <dd id="IonicStep.Meta.model.spacegroup_id" class="variable"><a href="../../../database/base_data_types/relaxation.html#IonicStep.spacegroup_id">spacegroup_id</a></dd>

            </div>
            <div><dt><a href="../../../database/base_data_types/structure.html#Structure">simmate.database.base_data_types.structure.Structure</a></dt>
                                <dd id="IonicStep.Meta.model.to_toolkit" class="function"><a href="../../../database/base_data_types/structure.html#Structure.to_toolkit">to_toolkit</a></dd>

            </div>
            <div><dt><a href="../../../database/base_data_types/thermodynamics.html#Thermodynamics">simmate.database.base_data_types.thermodynamics.Thermodynamics</a></dt>
                                <dd id="IonicStep.Meta.model.update_chemical_system_stabilities" class="function"><a href="../../../database/base_data_types/thermodynamics.html#Thermodynamics.update_chemical_system_stabilities">update_chemical_system_stabilities</a></dd>
                <dd id="IonicStep.Meta.model.update_all_stabilities" class="function"><a href="../../../database/base_data_types/thermodynamics.html#Thermodynamics.update_all_stabilities">update_all_stabilities</a></dd>

            </div>
            <div><dt><a href="../../../database/base_data_types/base.html#DatabaseTable">simmate.database.base_data_types.base.DatabaseTable</a></dt>
                                <dd id="IonicStep.Meta.model.source_doi" class="variable"><a href="../../../database/base_data_types/base.html#DatabaseTable.source_doi">source_doi</a></dd>
                <dd id="IonicStep.Meta.model.remote_archive_link" class="variable"><a href="../../../database/base_data_types/base.html#DatabaseTable.remote_archive_link">remote_archive_link</a></dd>
                <dd id="IonicStep.Meta.model.objects" class="function"><a href="../../../database/base_data_types/base.html#DatabaseTable.objects">objects</a></dd>
                <dd id="IonicStep.Meta.model.get_table_name" class="function"><a href="../../../database/base_data_types/base.html#DatabaseTable.get_table_name">get_table_name</a></dd>
                <dd id="IonicStep.Meta.model.create_subclass" class="function"><a href="../../../database/base_data_types/base.html#DatabaseTable.create_subclass">create_subclass</a></dd>
                <dd id="IonicStep.Meta.model.from_toolkit" class="function"><a href="../../../database/base_data_types/base.html#DatabaseTable.from_toolkit">from_toolkit</a></dd>
                <dd id="IonicStep.Meta.model.load_archive" class="function"><a href="../../../database/base_data_types/base.html#DatabaseTable.load_archive">load_archive</a></dd>
                <dd id="IonicStep.Meta.model.load_remote_archive" class="function"><a href="../../../database/base_data_types/base.html#DatabaseTable.load_remote_archive">load_remote_archive</a></dd>
                <dd id="IonicStep.Meta.model.get_column_names" class="function"><a href="../../../database/base_data_types/base.html#DatabaseTable.get_column_names">get_column_names</a></dd>
                <dd id="IonicStep.Meta.model.show_columns" class="function"><a href="../../../database/base_data_types/base.html#DatabaseTable.show_columns">show_columns</a></dd>
                <dd id="IonicStep.Meta.model.get_mixins" class="function"><a href="../../../database/base_data_types/base.html#DatabaseTable.get_mixins">get_mixins</a></dd>
                <dd id="IonicStep.Meta.model.get_mixin_names" class="function"><a href="../../../database/base_data_types/base.html#DatabaseTable.get_mixin_names">get_mixin_names</a></dd>
                <dd id="IonicStep.Meta.model.get_extra_columns" class="function"><a href="../../../database/base_data_types/base.html#DatabaseTable.get_extra_columns">get_extra_columns</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../../../../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../../../../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.type) {
                    case "function":
                        heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span><span class="signature">${doc.signature}:</span>`;
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value">${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.type}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>